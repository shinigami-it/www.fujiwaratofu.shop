---
import Layout from '~/layouts/PageLayout.astro';
import Hero from '~/components/widgets/Hero.astro';
import Note from '~/components/widgets/Note.astro';
import Features from '~/components/widgets/Features.astro';
import Features2 from '~/components/widgets/Features2.astro';
import Steps from '~/components/widgets/Steps.astro';
import Content from '~/components/widgets/Content.astro';
import BlogLatestPosts from '~/components/widgets/BlogLatestPosts.astro';
import FAQs from '~/components/widgets/FAQs.astro';
import Stats from '~/components/widgets/Stats.astro';
import CallToAction from '~/components/widgets/CallToAction.astro';

import { fetchCalendarEvents } from '~/utils/db'; // Import the fetch function

// Fetch the calendar events from the database
const events = await fetchCalendarEvents();

const metadata = {
  title: 'Calendar - Fujiwara Tofu Shop',
  ignoreTitleTemplate: true,
};
---

<Layout metadata={metadata}>
  <!-- Hero Widget ******************* -->

  <Hero
    image={{ src: '~/assets/images/supra_mk4.png', alt: 'AstroWind Hero Image' }}
  >
    <div slot="subtitle" style="margin-top: 5vh; margin-bottom: 5vh; font-size: 3.75rem; font-weight: 700;font-family: var(--aw-font-sans, ui-sans-serif), ui-sans-serif, system-ui, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";">
      Fujiwara Tofu Shop
    </div>

    <div slot="subtitle" style="margin-top: 10vh; margin-bottom: 5vh; font-size: 1.25rem; line-height: 1.75rem; font-family: var(--aw-font-sans, ui-sans-serif), ui-sans-serif, system-ui, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";">
      WE LIVE AND BREATHE MOTORSPORT
    </div>
  </Hero>

  <!-- Note Widget ******************* -->

  <Note />

  <!-- Dynamic Calendar Events -->
  <div class="mt-12 px-[10vh]">
    <h2 class="text-3xl font-extrabold tracking-tight dark:text-white sm:text-4xl mb-8 text-center">
      Calendar Events
    </h2>
    <div class="grid grid-cols-1 sm:grid-cols-2 gap-8">
      {events.length > 0 ? (
        events.map((event) => (
          <div class="bg-gradient-to-r from-[#ff7313] to-[#f2b60d] dark:bg-gradient-to-r dark:from-[#ff7313] dark:to-[#f2b60d] p-4 rounded-lg shadow-lg flex flex-col items-start w-full border-4 border-black">
            <!-- Title: Using a darker shade of purple for contrast -->
            <p class="text-lg font-extrabold text-[#4A148C] mb-2 w-full">{event.title}</p>
            <!-- Description: Darker olive green with bolder font for readability -->
            <div class="flex items-center space-x-2 mb-4 w-full">
              <p class="text-[#4A148C] font-semibold"><strong>Description:</strong></p>
              <p class="text-sm font-semibold text-[#000]">{event.description}</p>
            </div>
            <div class="flex space-x-4 text-sm font-semibold text-[#000] w-full">
              <!-- Date/Time: Darker olive green with bolder font -->
              <p><strong class="text-[#4A148C]">Date:</strong> {event.date}</p>
              <p><strong class="text-[#4A148C]">Time:</strong> {event.timeStart}</p>
              {event.timeEnd && <p><strong class="text-[#4A148C]">End Time:</strong> {event.timeEnd}</p>}
            </div>
          </div>
        ))
      ) : (
        <p class="text-center text-gray-500">No events available at the moment.</p>
      )}
    </div>
  </div>
  

  <!-- Features Widget *************** -->

  <Features
    id="features"
    tagline="Tournament Features"
    title="What You Get with Fujiwara Tofu Shop Tournaments"
    subtitle="High-stakes, high-reward tournaments for racers who thrive under pressure."
    items={[
      {
        title: 'High-Risk, High-Reward Tournaments',
        description:
          'Compete in intense, high-stakes tournaments where victory means cash prizes and ultimate bragging rights. Only the fastest and most skilled racers can claim the win.',
        icon: 'tabler:star',
      },
      {
        title: 'Free-to-Join Events with Cash Prizes',
        description:
          'We offer free-to-join tournaments, giving everyone a chance to race for a prize pool. The best part? You can win real money without spending a dime!',
        icon: 'tabler:cash',
      },
      {
        title: 'Multiple Racing Styles',
        description:
          'From touge to circuit racing, rallying, and endurance events, we offer a variety of racing formats. No matter your style, there’s a tournament waiting for you.',
        icon: 'tabler:car',
      },
      {
        title: 'Track Your Progress',
        description:
          'As you race, track your performance and climb the leaderboard. Stay ahead of the competition and show the world you’re the best of the best.',
        icon: 'tabler:chart-line',
      },
    ]}
  />

  <!-- Content Widget **************** -->

  <Content
    isReversed
    tagline="The Ultimate Racing Challenge"
    title="Fujiwara Tofu Shop: The Home of High-Stakes Tournaments"
    items={[
      {
        title: 'Race for Glory',
        description:
          'Our tournaments are more than just races—they’re battles for prestige, cash prizes, and the honor of being the best racer on the mountain.',
      },
      {
        title: 'Perfect Your Skills',
        description:
          'Every tournament is an opportunity to refine your technique, whether it’s mastering the touge, acing rally stages, or pushing the limits in endurance racing.',
      },
      {
        title: 'Fight for the Prize Pool',
        description:
          'With cash prizes on the line, every race is a high-stakes event. Only the fastest, most consistent racers will make it to the top.',
      },
    ]}
    image={{
      src: '~/assets/images/porsche.png',
      alt: 'Colorful Image',
    }}
  >
    <Fragment slot="content">
      <h3 class="text-2xl font-bold tracking-tight dark:text-white sm:text-3xl mb-2">The Race is On</h3>
      Whether you’re drifting on the touge or racing through endurance stages, every tournament is a chance to prove your dominance.
    </Fragment>

    <Fragment slot="bg">
      <div class="absolute inset-0 bg-blue-50 dark:bg-transparent"></div>
    </Fragment>
  </Content>

  <!-- Steps Widget ****************** -->

  <Steps
    title="How to Join Tournaments?"
    items={[
      {
        title: 'Step 1: <span class="font-medium">Join the Discord Server</span>',
        description:
          'Join our server to get all the details on upcoming tournaments, race formats, and prize pools. It’s the hub for everything!',
        icon: 'tabler:brand-discord',
      },
      {
        title: 'Step 2: <span class="font-medium">Find the Tickets Channel</span>',
        description:
          'Look for the dedicated tickets channel in our Discord. This is where you can register for the tournaments and stay updated.',
        icon: 'tabler:speakerphone',
      },
      {
        title: 'Step 3: <span class="font-medium">Create a Ticket</span>',
        description:
          'Submit a ticket with the required personal information to join the tournament. Our moderators will add you to the race once everything is confirmed.',
        icon: 'tabler:ticket',
      },
      {
        title: 'Ready!',
        description: 'Once you’ve been added, get ready to race and compete for glory and cash prizes!',
        icon: 'tabler:check',
      },
    ]}
    image={{
      src: '~/assets/images/supra_mk5.png',
      alt: 'Steps image',
    }}
  />

  <!-- FAQs Widget ******************* -->

  <FAQs
    title="Tournament FAQs"
    subtitle="Got questions? We’ve got answers! Everything you need to know about joining our high-stakes tournaments."
    tagline="FAQs"
    classes={{ container: 'max-w-6xl' }}
    items={[
      {
        title: 'What types of tournaments does FTS host?',
        description:
          'We host a variety of tournaments, including circuit races, touge battles, rally events, and endurance challenges. All events come with different skill levels, so there’s something for everyone.',
      },
      {
        title: 'Do I need to pay to join?',
        description:
          'Some tournaments are free to join, and others are paid. However, every tournament offers cash prizes to winners, and we encourage everyone to participate in free tournaments for a chance at glory.',
      },
      {
        title: 'How do I register for a tournament?',
        description:
          'To register, simply join our Discord, check the tournament announcements, and follow the registration instructions. You’ll be added to the event once your sign-up is confirmed.',
      },
      {
        title: 'What can I win in a tournament?',
        description:
          'Cash prizes, trophies, and the title of the best racer in each discipline. We also offer exclusive bragging rights for the toughest events.',
      },
      {
        title: 'Can I race with friends?',
        description:
          'Absolutely! You can team up with friends for private races or join public events together. But remember, in the high-risk tournaments, it’s every racer for themselves!',
      },
      {
        title: 'How do I improve my performance in tournaments?',
        description:
          'Join practice sessions, review replays, and seek feedback from other racers. Our community is always ready to help you refine your skills and take your racing to the next level.',
      },
    ]}
  />


  <!-- CallToAction Widget *********** -->

  <CallToAction
    actions={[
      {
        variant: 'primary',
        text: 'Join the FTS Discord',
        href: 'https://discord.gg/uY7NxaCKxb',
        target: '_blank',
        icon: 'tabler:brand-discord',
      },
    ]}
  >
    <Fragment slot="title">
      Interested?
    </Fragment>

    <Fragment slot="subtitle">
      Join the Fujiwara Tofu Shop community and push your limits!
    </Fragment>
  </CallToAction>
  
</Layout>
